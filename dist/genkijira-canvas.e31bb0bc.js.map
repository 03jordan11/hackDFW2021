{"version":3,"sources":["entity.js","index.js"],"names":["Entity","x","y","width","height","imagePath","pos","vel","image","Image","src","ctx","drawImage","can","document","querySelector","getContext","gravity","isJumping","entities","addEntity","entity","push","genkijira","food","init","window","innerWidth","innerHeight","clear","fillStyle","fillRect","jump","update","g","addEventListener","ev","key","loop","requestAnimationFrame","forEach","draw","onload","_"],"mappings":"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","file":"genkijira-canvas.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export class Entity {\n  constructor({x, y, width, height, imagePath}) {\n    this.pos = {\n      x,\n      y,\n    };\n    this.vel = {\n      x: 0,\n      y: 0,\n    };\n    this.width = width;\n    this.height = height;\n    this.image = new Image();\n    this.image.src = imagePath;\n  }\n\n  draw(ctx) {\n    ctx.drawImage(this.image, this.pos.x, this.pos.y, this.width, this.height);\n  }\n}\n","import { Entity } from './entity';\n\nconst can = document.querySelector('#can');\nconst ctx = can.getContext('2d');\n\nconst gravity = 0.2;\nlet isJumping = false;\nconst entities = [];\n\nfunction addEntity(entity) {\n  entities.push(entity);\n}\n\nconst genkijira = new Entity(\n  {\n    x: 200,\n    y: 200,\n    width: 200,\n    height: 300,\n    imagePath: './gotchi.png',\n  }\n);\naddEntity(genkijira);\n\nconst food = new Entity(\n  {\n    x: 600,\n    y: 200,\n    width: 130,\n    height: 200,\n    imagePath: './lollipop.png',\n  }\n);\naddEntity(food);\n\nfunction init() {\n  can.width = window.innerWidth;\n  can.height = window.innerHeight;\n}\n\nfunction clear() {\n  ctx.fillStyle = 'lightblue';\n  ctx.fillRect(0, 0, can.width, can.height);\n}\n\nfunction jump() {\n  isJumping = true;\n  genkijira.vel.y = -10;\n}\n\nfunction update() {\n  genkijira.vel.y += gravity;\n  genkijira.pos.y += genkijira.vel.y;\n\n  const g = can.height - genkijira.height;\n  if (genkijira.pos.y >= g) {\n    genkijira.pos.y = g - (genkijira.pos.y - g);\n    genkijira.vel.y = 0;\n    isJumping = false;\n  }\n}\n\ndocument.addEventListener('keydown', ev => {\n  switch(ev.key) {\n    case 'ArrowLeft':\n      genkijira.pos.x -= 5;\n      break;\n    case 'ArrowRight':\n      genkijira.pos.x += 5;\n      break;\n    case 'ArrowUp':\n      break;\n    case 'ArrowDown':\n      break;\n    case ' ':\n      if (!isJumping)\n        jump();\n      break;\n  }\n});\n\nfunction loop() {\n  window.requestAnimationFrame(loop);\n\n  clear();\n\n  update();\n\n  entities.forEach(entity => {\n    entity.draw(ctx);\n  });\n}\n\ninit();\ngenkijira.image.onload = _ => loop();\n\n"]}